<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Sign in · Anu’s Task Board</title>
    <script src="https://identity.netlify.com/v1/netlify-identity-widget.js"></script>
    <style>
      :root { color-scheme: light; }
      html,body{height:100%}
      body{margin:0;display:grid;place-items:center;background:#f5f7fb;font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial}
      .card{background:#fff;padding:28px 32px;border-radius:14px;box-shadow:0 12px 35px rgba(0,0,0,.10);text-align:center;max-width:420px}
      h1{margin:0 0 8px;font-size:32px;color:#111827}
      p{margin:0 0 18px;color:#4b5563}
      .btn{padding:12px 18px;border:none;border-radius:10px;background:#2d3748;color:#fff;font-weight:700;cursor:pointer}
      .btn:focus-visible{outline:3px solid #a5b4fc;outline-offset:2px}
    </style>
  </head>
  <body>
    <div class="card">
      <h1>Sign in</h1>
      <p>We’ll email you a one-time login link.</p>
      <button class="btn" onclick="window.netlifyIdentity && netlifyIdentity.open()">Sign in</button>
    </div>

    <script>
      if (window.netlifyIdentity) {
        // Initialize so invite/reset/magic-link tokens in the URL are processed
        netlifyIdentity.init();

        // If we arrive with a token, let the widget pick the correct view (no "login" arg)
        const hasTok=/invite_token|confirmation_token|recovery_token|access_token|token=/.test(location.hash||"");
        if (hasTok) netlifyIdentity.open();

        netlifyIdentity.on('init', user => { if (user) location.replace('/'); });
        netlifyIdentity.on('login', () => location.replace('/'));
      }
    </script>
  </body>
</html>
